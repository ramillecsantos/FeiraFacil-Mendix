import{useState as e,useEffect as t,Children as n,createElement as r,useRef as o,useCallback as i,useMemo as a,Fragment as c}from"react";import s from"../../../shared/plotly.js";import l from"../../../shared/ace.js";import u from"big.js";var d,f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
d=p,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)n.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&n.push(a)}}else if("object"===i){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var c in o)e.call(o,c)&&o[c]&&n.push(c)}}}return n.join(" ")}d.exports?(t.default=t,d.exports=t):window.classNames=t}();var h=p.exports;function g(e){const t={};if(e.width&&(t.width="percentage"===e.widthUnit?"".concat(e.width,"%"):"".concat(e.width,"px")),e.height)if("percentageOfWidth"===e.heightUnit&&e.width){const n=e.height/100*e.width;"percentage"===e.widthUnit?(t.height="auto",t.paddingBottom="".concat(n,"%")):t.height="".concat(n,"px")}else"pixels"===e.heightUnit?t.height="".concat(e.height,"px"):"percentageOfParent"===e.heightUnit&&(t.height="".concat(e.height,"%"));return t}var v=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===m}(e)}(e)};var m="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function b(e,t){return!1!==t.clone&&t.isMergeableObject(e)?_((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function y(e,t,n){return e.concat(t).map((function(e){return b(e,n)}))}function w(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function A(e,t){try{return t in e}catch(e){return!1}}function O(e,t,n){var r={};return n.isMergeableObject(e)&&w(e).forEach((function(t){r[t]=b(e[t],n)})),w(t).forEach((function(o){(function(e,t){return A(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(A(e,o)&&n.isMergeableObject(t[o])?r[o]=function(e,t){if(!t.customMerge)return _;var n=t.customMerge(e);return"function"==typeof n?n:_}(o,n)(e[o],t[o],n):r[o]=b(t[o],n))})),r}function _(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||y,n.isMergeableObject=n.isMergeableObject||v,n.cloneUnlessOtherwiseSpecified=b;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):O(e,t,n):b(t,n)}_.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return _(e,n,t)}),{})};var x=_,k=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))};var S=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))};const E={layout:{font:{family:"Open Sans",size:14,color:"#555"},autosize:!0,hovermode:"closest",hoverlabel:{bgcolor:"#888",bordercolor:"#888",font:{color:"#FFF"}},margin:{l:60,r:60,b:60,t:60,pad:10}},configuration:{displayModeBar:!1,doubleClick:!1},series:{connectgaps:!0,hoverinfo:"none",hoveron:"points"}};function N(e){console.warn("Error in theme folder configuration file: ".concat(e))}const C=(n,r)=>{const[o,i]=e({layout:{},configuration:{},series:{}});return t((()=>{r&&function(){S(this,void 0,void 0,(function*(){try{const e=yield function(){return k(this,void 0,void 0,(function*(){try{if(!window)return null;const e=yield window.fetch("".concat(window.mx.remoteUrl,"com.mendix.charts.json"));if(e.ok)return yield e.json()}catch(e){return null}}))}();if(null==e)return;if(!(e instanceof Object))return void N("invalid json object");if(!e.layout&&!e.configuration&&!e.charts)return void N("no 'layout', 'configuration', or 'charts' property found");i((t=>{var r;return{configuration:e.configuration||t.configuration,layout:e.layout||t.layout,series:(null===(r=e.charts)||void 0===r?void 0:r[n])||t.series}}))}catch(e){N(e)}}))}()}),[n,r]),o},j=e=>{let{className:t,bootstrapStyle:o,children:i,role:a}=e;return n.count(i)>0?r("div",{className:h("alert alert-".concat(o),t),role:a},i):null};function L(e,n){t((()=>{const{current:t}=Array.isArray(e)?e[0]:e;if(!t)return;const r=t.ownerDocument,o=function(e,t){const n=Array.isArray(e)?e:[e];return e=>{n.every((t=>{let{current:n}=t;return n&&!n.contains(e.target)}))&&t()}}(e,n);return r.addEventListener("mousedown",o),r.addEventListener("touchstart",o),()=>{r.removeEventListener("mousedown",o),r.removeEventListener("touchstart",o)}}),[e,n])}j.displayName="Alert";const P=e=>{let{className:t,isOpen:n,onBlur:o,onClick:i,children:a}=e;return r("div",{className:h("widget-sidebar",t,{"widget-sidebar-open":n}),onClick:i},r("div",{className:"overlay",onClick:o}),r("div",{className:"sidebar-content"},a))},T=e=>{let{className:t,onClose:n,children:o}=e;const i=n?10:12;return r("div",{className:h("sidebar-content-header",t)},r("div",{className:"header-content col-sm-".concat(i," col-xs-").concat(i)},o),n?r("div",{className:"col-sm-2 col-xs-2"},r("button",{className:"btn btn-image btn-icon close-button",onClick:n},r("img",{src:"widgets/com/mendix/widget/web/heatmap/assets/a67f3e73956c1a2a.svg",className:"removeIcon",alt:"Close the playground sidebar"}))):null)};const R="{}";function I(e){return function(e){return null!=e&&""!==e}(e)?e:R}const D=()=>{const[t,n]=e(!1),i=o(null),a=o(null);return L(a,(()=>n(!1))),r("button",{className:"info-tooltip",ref:i,onClick:()=>n(!0)},r("img",{src:"widgets/com/mendix/widget/web/heatmap/assets/3f4e15cb9aac0353.svg",className:"info-tooltip-icon",alt:"Show inline editor information"}),t?r("div",{ref:a,className:"info-tooltip-info",style:{width:i.current&&i.current.parentElement?.9*i.current.parentElement.clientWidth:"auto"}},r(j,{bootstrapStyle:"info",className:"info-tooltip-info-content"},r("p",null,r("strong",null,"Changes made in this editor are only for preview purposes.")),r("p",null,"The JSON can be copied and pasted into the widgets properties in the desktop modeler"),r("p",null,"Check out the chart options here:"," ",r("a",{href:"https://plot.ly/javascript/reference/",target:"_blank",rel:"noreferrer"},"https://plot.ly/javascript/reference/")))):null)},M=t=>{let{children:n,renderPanels:o,renderSidebarHeaderTools:a}=t;const[c,s]=e(!1),l=i((()=>s(!1)),[]),u=i((()=>s((e=>!e))),[]);return r("div",{className:h("widget-charts-playground",{"playground-open":c})},r(P,{isOpen:c,onBlur:l},r(T,{className:"row",onClose:l},a),r("div",{className:"sidebar-content-body"},r(D,null),o)),r("div",{className:"widget-charts-playground-toggle"},r("button",{className:"mx-button btn",onClick:u},"Toggle Editor")),n)},B=e=>{let{className:t,heading:n,headingClassName:o,children:i}=e;return r("div",{className:h("widget-panel",t)},n?r("div",{className:h("widget-panel-header",o)},n):null,i)},V=e=>{let{className:t,children:n}=e;return r("div",{className:h("sidebar-header-tools",t)},n)},U=e=>{let{onChange:t,options:n}=e;return r("select",{className:"form-control",onChange:e=>t(e.currentTarget.value)},n.map((e=>r("option",{key:"select-option-".concat(e.value),value:e.value,defaultChecked:e.isDefaultSelected},e.name))))};function F(e){return new Array(e).fill(R)}const z=n=>{let{data:r,customConfig:c,customLayout:s}=n;const[l,u]=e("layout"),[d,f]=e(I(c)),[p,h]=e(I(s)),[g,v]=e(F(r.length)),m=o(null),b=o(!1);t((()=>{r.length!==g.length&&v(F(r.length))}),[r.length,g.length]);const y=i((e=>{m.current&&clearTimeout(m.current),m.current=window.setTimeout((()=>{try{const t=b.current?JSON.stringify(JSON.parse(e),null,2):function(e){const t=e.replace(/(['"])?([a-z0-9A-Z_]+)(['"])?:/g,'"$2": ').replace(/'/g,'"');return JSON.stringify(JSON.parse(t),null,2)}(e);switch(l){case"layout":h(t);break;case"config":f(t);break;default:const e=parseInt(l,10);v((n=>n.map(((n,r)=>r===e?t:n))))}}catch(e){b.current=!1}}),1e3)}),[l]),w=i((e=>{b.current=e}),[]),A=a((()=>r.map(((e,t)=>Object.assign(Object.assign({},e),{customSeriesOptions:g[t]})))),[r,g]);return{activeEditableCode:a((()=>"layout"===l?p:"config"===l?d:g[parseInt(l,10)]),[l,d,p,g]),activeView:l,changeActiveView:u,changeEditableCode:y,changeEditableCodeIsValid:w,editedConfig:d,editedData:A,editedLayout:p}};
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var J,$=(J=function(e,t){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},J(e,t)},function(e,t){function n(){this.constructor=e}J(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),H=Object.prototype.hasOwnProperty;function G(e,t){return H.call(e,t)}function W(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var o in e)G(e,o)&&r.push(o);return r}function q(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Y(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function Q(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function X(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Z(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Z(e[t]))return!0}else if("object"==typeof e)for(var r=W(e),o=r.length,i=0;i<o;i++)if(Z(e[r[i]]))return!0;return!1}function K(e,t){var n=[e];for(var r in t){var o="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==o&&n.push(r+": "+o)}return n.join("\n")}var ee=function(e){function t(t,n,r,o,i){var a=this.constructor,c=e.call(this,K(t,{name:n,index:r,operation:o,tree:i}))||this;return c.name=n,c.index=r,c.operation=o,c.tree=i,Object.setPrototypeOf(c,a.prototype),c.message=K(t,{name:n,index:r,operation:o,tree:i}),c}return $(t,e),t}(Error),te=ee,ne=q,re={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=ie(n,this.path);r&&(r=q(r));var o=ae(n,{op:"remove",path:this.from}).removed;return ae(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=ie(n,this.from);return ae(n,{op:"add",path:this.path,value:q(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:ue(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},oe={add:function(e,t,n){return Y(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:re.move,copy:re.copy,test:re.test,_get:re._get};function ie(e,t){if(""==t)return e;var n={op:"_get",path:t};return ae(e,n),n.value}function ae(e,t,n,r,o,i){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===i&&(i=0),n&&("function"==typeof n?n(t,0,e,t.path):se(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=ie(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=ue(e,t.value),!1===a.test)throw new te("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new te("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return a}r||(e=q(e));var c=(t.path||"").split("/"),s=e,l=1,u=c.length,d=void 0,f=void 0,p=void 0;for(p="function"==typeof n?n:se;;){if((f=c[l])&&-1!=f.indexOf("~")&&(f=X(f)),o&&("__proto__"==f||"prototype"==f&&l>0&&"constructor"==c[l-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===d&&(void 0===s[f]?d=c.slice(0,l).join("/"):l==u-1&&(d=t.path),void 0!==d&&p(t,0,e,d)),l++,Array.isArray(s)){if("-"===f)f=s.length;else{if(n&&!Y(f))throw new te("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);Y(f)&&(f=~~f)}if(l>=u){if(n&&"add"===t.op&&f>s.length)throw new te("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);if(!1===(a=oe[t.op].call(t,s,f,e)).test)throw new te("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return a}}else if(l>=u){if(!1===(a=re[t.op].call(t,s,f,e)).test)throw new te("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return a}if(s=s[f],n&&l<u&&(!s||"object"!=typeof s))throw new te("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,t,e)}}function ce(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),n&&!Array.isArray(t))throw new te("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=q(e));for(var i=new Array(t.length),a=0,c=t.length;a<c;a++)i[a]=ae(e,t[a],n,!0,o,a),e=i[a].newDocument;return i.newDocument=e,i}function se(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new te("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!re[e.op])throw new te("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new te("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new te('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new te("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new te("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&Z(e.value))throw new te("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var o=e.path.split("/").length,i=r.split("/").length;if(o!==i+1&&o!==i)throw new te("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new te("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=le([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new te("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function le(e,t,n){try{if(!Array.isArray(e))throw new te("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)ce(q(t),q(e),n||!0);else{n=n||se;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof te)return e;throw e}}function ue(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,o,i=Array.isArray(e),a=Array.isArray(t);if(i&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!ue(e[n],t[n]))return!1;return!0}if(i!=a)return!1;var c=Object.keys(e);if((r=c.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(c[n]))return!1;for(n=r;0!=n--;)if(!ue(e[o=c[n]],t[o]))return!1;return!0}return e!=e&&t!=t}var de=Object.freeze({__proto__:null,JsonPatchError:te,deepClone:ne,getValueByPointer:ie,applyOperation:ae,applyPatch:ce,applyReducer:function(e,t,n){var r=ae(e,t);if(!1===r.test)throw new te("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument},validator:se,validate:le,_areEquals:ue}),fe=new WeakMap,pe=function(e){this.observers=new Map,this.obj=e},he=function(e,t){this.callback=e,this.observer=t};
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */function ge(e,t){void 0===t&&(t=!1);var n=fe.get(e.object);ve(n.value,e.object,e.patches,"",t),e.patches.length&&ce(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function ve(e,t,n,r,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=W(t),a=W(e),c=!1,s=a.length-1;s>=0;s--){var l=e[d=a[s]];if(!G(t,d)||void 0===t[d]&&void 0!==l&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&n.push({op:"test",path:r+"/"+Q(d),value:q(l)}),n.push({op:"remove",path:r+"/"+Q(d)}),c=!0):(o&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var u=t[d];"object"==typeof l&&null!=l&&"object"==typeof u&&null!=u&&Array.isArray(l)===Array.isArray(u)?ve(l,u,n,r+"/"+Q(d),o):l!==u&&(o&&n.push({op:"test",path:r+"/"+Q(d),value:q(l)}),n.push({op:"replace",path:r+"/"+Q(d),value:q(u)}))}}if(c||i.length!=a.length)for(s=0;s<i.length;s++){var d;G(e,d=i[s])||void 0===t[d]||n.push({op:"add",path:r+"/"+Q(d),value:q(t[d])})}}}function me(e,t,n){void 0===n&&(n=!1);var r=[];return ve(e,t,r,"",n),r}var be=Object.freeze({__proto__:null,unobserve:function(e,t){t.unobserve()},observe:function(e,t){var n,r=function(e){return fe.get(e)}(e);if(r){var o=function(e,t){return e.observers.get(t)}(r,t);n=o&&o.observer}else r=new pe(e),fe.set(e,r);if(n)return n;if(n={},r.value=q(e),t){n.callback=t,n.next=null;var i=function(){ge(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(i)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=e,n.unobserve=function(){ge(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new he(t,n)),n},generate:ge,compare:me});Object.assign({},de,be,{JsonPatchError:ee,deepClone:q,escapePathComponent:Q,unescapePathComponent:X});var ye={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},we="a".charCodeAt(),Ae=function(e,t,n){var r={},o=0,i=0,a=0,c=n&&n.bigint&&"undefined"!=typeof BigInt;return{data:s("",!0),pointers:r};function s(t,n){var r;l(),v(t,"value");var o=f();switch(o){case"t":d("rue"),r=!0;break;case"f":d("alse"),r=!1;break;case"n":d("ull"),r=null;break;case'"':r=u();break;case"[":r=function(e){l();var t=[],n=0;if("]"==f())return t;p();for(;;){var r=e+"/"+n;t.push(s(r)),l();var o=f();if("]"==o)break;","!=o&&w(),l(),n++}return t}(t);break;case"{":r=function(e){l();var t={};if("}"==f())return t;p();for(;;){var n=b();'"'!=f()&&w();var r=u(),o=e+"/"+xe(r);m(o,"key",n),v(o,"keyEnd"),l(),":"!=f()&&w(),l(),t[r]=s(o),l();var i=f();if("}"==i)break;","!=i&&w(),l()}return t}(t);break;default:p(),"-0123456789".indexOf(o)>=0?r=function(){var t="",n=!0;"-"==e[a]&&(t+=f());t+="0"==e[a]?f():g(),"."==e[a]&&(t+=f()+g(),n=!1);"e"!=e[a]&&"E"!=e[a]||(t+=f(),"+"!=e[a]&&"-"!=e[a]||(t+=f()),t+=g(),n=!1);var r=+t;return c&&n&&(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)?BigInt(t):r}():y()}return v(t,"valueEnd"),l(),n&&a<e.length&&y(),r}function l(){e:for(;a<e.length;){switch(e[a]){case" ":i++;break;case"\t":i+=4;break;case"\r":i=0;break;case"\n":i=0,o++;break;default:break e}a++}}function u(){for(var e,t="";'"'!=(e=f());)"\\"==e?(e=f())in ye?t+=ye[e]:"u"==e?t+=h():w():t+=e;return t}function d(e){for(var t=0;t<e.length;t++)f()!==e[t]&&w()}function f(){A();var t=e[a];return a++,i++,t}function p(){a--,i--}function h(){for(var e=4,t=0;e--;){t<<=4;var n=f().toLowerCase();n>="a"&&n<="f"?t+=n.charCodeAt()-we+10:n>="0"&&n<="9"?t+=+n:w()}return String.fromCharCode(t)}function g(){for(var t="";e[a]>="0"&&e[a]<="9";)t+=f();if(t.length)return t;A(),y()}function v(e,t){m(e,t,b())}function m(e,t,n){r[e]=r[e]||{},r[e][t]=n}function b(){return{line:o,column:i,pos:a}}function y(){throw new SyntaxError("Unexpected token "+e[a]+" in JSON at position "+a)}function w(){p(),y()}function A(){if(a>=e.length)throw new SyntaxError("Unexpected end of JSON input")}},Oe=/~/g,_e=/\//g;function xe(e){return e.replace(Oe,"~0").replace(_e,"~1")}!function(e,t){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,i=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"punctuation.operator",regex:/[,]/},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};r.inherits(i,o),t.JsonHighlightRules=i})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(e,t,n){var r=e("../range").Range,o=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var o=n[1].length,i=e.findMatchingBracket({row:t,column:o});if(!i||i.row==t)return 0;var a=this.$getIndent(e.getLine(i.row));e.replace(new r(t,0,t,o-1),a)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(o.prototype),t.MatchingBraceOutdent=o})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){var r=e("../../lib/oop"),o=e("../../range").Range,i=e("./fold_mode").FoldMode,a=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(a,i),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var o=this._getFoldWidgetBase(e,t,n);return!o&&this.startRegionRe.test(r)?"start":o},this.getFoldWidgetRange=function(e,t,n,r){var o,i=e.getLine(n);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(e,i,n);if(o=i.match(this.foldingStartMarker)){var a=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,a);var c=e.getCommentFoldRange(n,a+o[0].length,1);return c&&!c.isMultiLine()&&(r?c=this.getSectionRange(e,n):"all"!=t&&(c=null)),c}if("markbegin"!==t&&(o=i.match(this.foldingStopMarker))){a=o.index+o[0].length;return o[1]?this.closingBracketBlock(e,o[1],n,a):e.getCommentFoldRange(n,a,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),i=t,a=n.length,c=t+=1,s=e.getLength();++t<s;){var l=(n=e.getLine(t)).search(/\S/);if(-1!==l){if(r>l)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=i)break;if(u.isMultiLine())t=u.end.row;else if(r==l)break}c=t}}return new o(i,a,c,e.getLine(c).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),i=e.getLength(),a=n,c=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,s=1;++n<i;){t=e.getLine(n);var l=c.exec(t);if(l&&(l[1]?s--:s++,!s))break}if(n>a)return new o(a,r,n,t.length)}}.call(a.prototype)})),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(e,t,n){var r=e("../lib/oop"),o=e("./text").Mode,i=e("./json_highlight_rules").JsonHighlightRules,a=e("./matching_brace_outdent").MatchingBraceOutdent,c=e("./folding/cstyle").FoldMode,s=e("../worker/worker_client").WorkerClient,l=function(){this.HighlightRules=i,this.$outdent=new a,this.$behaviour=this.$defaultBehaviour,this.foldingRules=new c};r.inherits(l,o),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t);"start"==e&&(t.match(/^.*[\{\(\[]\s*$/)&&(r+=n));return r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new s(["ace"],"ace/mode/json_worker","JsonWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t},this.$id="ace/mode/json"}.call(l.prototype),t.Mode=l})),ace.require(["ace/mode/json"],(function(t){e&&(e.exports=t)}))}({exports:{}});!function(e,t){ace.define("ace/theme/github-css",["require","exports","module"],(function(e,t,n){n.exports='/* CSS style content from github\'s default pygments highlighter template.\n   Cursor and selection styles from textmate.css. */\n.ace-github .ace_gutter {\n  background: #e8e8e8;\n  color: #AAA;\n}\n\n.ace-github  {\n  background: #fff;\n  color: #000;\n}\n\n.ace-github .ace_keyword {\n  font-weight: bold;\n}\n\n.ace-github .ace_string {\n  color: #D14;\n}\n\n.ace-github .ace_variable.ace_class {\n  color: teal;\n}\n\n.ace-github .ace_constant.ace_numeric {\n  color: #099;\n}\n\n.ace-github .ace_constant.ace_buildin {\n  color: #0086B3;\n}\n\n.ace-github .ace_support.ace_function {\n  color: #0086B3;\n}\n\n.ace-github .ace_comment {\n  color: #998;\n  font-style: italic;\n}\n\n.ace-github .ace_variable.ace_language  {\n  color: #0086B3;\n}\n\n.ace-github .ace_paren {\n  font-weight: bold;\n}\n\n.ace-github .ace_boolean {\n  font-weight: bold;\n}\n\n.ace-github .ace_string.ace_regexp {\n  color: #009926;\n  font-weight: normal;\n}\n\n.ace-github .ace_variable.ace_instance {\n  color: teal;\n}\n\n.ace-github .ace_constant.ace_language {\n  font-weight: bold;\n}\n\n.ace-github .ace_cursor {\n  color: black;\n}\n\n.ace-github.ace_focus .ace_marker-layer .ace_active-line {\n  background: rgb(255, 255, 204);\n}\n.ace-github .ace_marker-layer .ace_active-line {\n  background: rgb(245, 245, 245);\n}\n\n.ace-github .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n\n.ace-github.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n/* bold keywords cause cursor issues for some fonts */\n/* this disables bold style for editor and keeps for static highlighter */\n.ace-github.ace_nobold .ace_line > span {\n    font-weight: normal !important;\n}\n\n.ace-github .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-github .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-github .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-github .ace_gutter-active-line {\n    background-color : rgba(0, 0, 0, 0.07);\n}\n\n.ace-github .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-github .ace_invisible {\n  color: #BFBFBF\n}\n\n.ace-github .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-github .ace_indent-guide {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n\n.ace-github .ace_indent-guide-active {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n}\n'})),ace.define("ace/theme/github",["require","exports","module","ace/theme/github-css","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-github",t.cssText=e("./github-css"),e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/github"],(function(t){e&&(e.exports=t)}))}({exports:{}});const ke=e=>{let{readOnly:t,value:n,onChange:o,onValidate:a,overwriteValue:c}=e;const s=i((e=>{o&&o(function(e){const t=e.split("\n");""===t[t.length-1]&&t.pop();return t.join("\n")}(e))}),[o]);return r(l,{className:t?"ace-editor-read-only":void 0,editorProps:{$blockScrolling:1/0},mode:"json",markers:c?Se(n,c):void 0,maxLines:1e3,onChange:o?s:void 0,onValidate:a,readOnly:t,setOptions:{showLineNumbers:!1,highlightActiveLine:!1,highlightGutterLine:!0},theme:"github",value:"".concat(n,"\n"),width:"100%"})};function Se(e,t){const n=[];if(t){me(JSON.parse(e),JSON.parse(t)).forEach((t=>{if("replace"===t.op){const r=function(e,t){const n=Ae(e).pointers[t.path];if(n&&n.key&&n.valueEnd)return{startRow:n.key.line,startCol:n.key.column,endRow:n.valueEnd.line,endCol:n.valueEnd.column,type:"text",className:"replaced-config"};return null}(e,t);r&&n.push(r)}}))}return n}const Ee={},Ne=e=>{let{data:n,configOptions:c,layoutOptions:l,seriesOptions:u,customConfig:d,customLayout:f}=e;const p=a((()=>x(l,Ce(f))),[l,f]),h=a((()=>x(c,Ce(d))),[c,d]),g=a((()=>{return e=u,n.map((t=>{const n=Object.assign({},t),r=Ce(n.customSeriesOptions);return delete n.customSeriesOptions,delete n.dataSourceItems,x.all([e,n,r],{arrayMerge:(e,t)=>{const n=e.filter((e=>void 0!==e)),r=t.filter((e=>void 0!==e));return x(n,r)}})}));var e}),[n,u]),v=i((e=>{const[{curveNumber:t,pointIndex:r,pointIndices:o}]=e.points,{dataSourceItems:i,onClick:a}=n[t],c=function(e,t){const n=null!=e?e:null==t?void 0:t.at(-1);if("number"!=typeof n)throw new Error("Unable to get item index for given point.");return n}(r,o),s=i[c];null==a||a(s)}),[n]);return function(e){const n=o(!1);t((()=>{!n.current&&e.length>0&&(window.dispatchEvent(new Event("resize")),n.current=!0)}),[e])}(n),r(s,{className:"mx-react-plotly-chart",data:g,style:Ee,config:h,layout:p,onClick:v})};function Ce(e){return JSON.parse(I(e))}const je=["x","y","z","customSeriesOptions"],Le=e=>{let{data:t,layoutOptions:n,configOptions:o,seriesOptions:i,customLayout:s,customConfig:l}=e;const{activeEditableCode:u,activeView:d,changeActiveView:f,changeEditableCode:p,changeEditableCodeIsValid:h,editedConfig:g,editedData:v,editedLayout:m}=z({data:t,customConfig:l,customLayout:s}),b=a((()=>{if("layout"===d)return n;if("config"===d)return o;const e=parseInt(d,10);return Object.fromEntries(Object.entries(t[e]).filter((e=>{let[t]=e;return!je.includes(t)})))}),[d,o,t,n]);return r(M,{renderPanels:r(c,null,r(B,{key:d,heading:"Custom settings"},r(ke,{readOnly:!1,value:u,onChange:p,onValidate:e=>h(!e.length)})),r(B,{key:"modeler",heading:"Settings from the Studio/Studio Pro",headingClassName:"read-only"},r(ke,{readOnly:!0,value:JSON.stringify(b,null,2),overwriteValue:u}))),renderSidebarHeaderTools:r(V,null,r(U,{onChange:f,options:[{name:"Layout",value:"layout",isDefaultSelected:!0},...t.map(((e,t)=>({name:e.name||"trace ".concat(t),value:t,isDefaultSelected:!1}))),{name:"Configuration",value:"config",isDefaultSelected:!1}]}))},r(Ne,{data:v,layoutOptions:n,customLayout:m,configOptions:o,customConfig:g,seriesOptions:i}))},Pe=e=>{let{className:t,data:n,widthUnit:o,width:i,heightUnit:c,height:s,showLegend:l,xAxisLabel:u,yAxisLabel:d,gridLinesMode:f,showSidebarEditor:p,customLayout:v,customConfig:m,layoutOptions:b,configOptions:y,seriesOptions:w,type:A,enableThemeConfig:O}=e;const _=C(A,O),k=a((()=>function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.all([E.layout,...t])}((e=>{let{showLegend:t,xAxisLabel:n,gridLinesMode:r,yAxisLabel:o}=e;return{showlegend:t,xaxis:{title:{text:n},showgrid:"both"===r||"vertical"===r},yaxis:{title:{text:o},showgrid:"both"===r||"horizontal"===r}}})({showLegend:l,xAxisLabel:u,gridLinesMode:f,yAxisLabel:d}),b,_.layout)),[l,u,f,d,b,_.layout]),S=a((()=>function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.all([E.configuration,...t])}(y,_.configuration)),[y,_.configuration]),N=a((()=>function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return x.all([E.series,...t])}(w,_.series)),[w,_.series]),j=p?Le:Ne;return r("div",{className:h("widget-chart",t),style:g({widthUnit:o,width:i,heightUnit:c,height:s})},r(j,{data:n,layoutOptions:k,customLayout:v,configOptions:S,customConfig:m,seriesOptions:N}))},Te=e=>e instanceof Date,Re=e=>e instanceof u,Ie=(e,t)=>e.localeCompare(t);function De(e,t){return(n,r)=>e(r)?t(n,r):void 0===r?-1:0}const Me={string:De((e=>"string"==typeof e),Ie),boolean:De((e=>"boolean"==typeof e),((e,t)=>Ie(e.toString(),t.toString()))),date:De(Te,((e,t)=>{const n=e.getTime()-t.getTime();return n>0?1:n<0?-1:0})),big:De(Re,((e,t)=>e.cmp(t))),undefined:(e,t)=>e===t?0:1};function Be(e,t){switch(typeof e){case"string":return Me.string(e,t);case"boolean":return Me.boolean(e,t);case"undefined":return Me.undefined(e,t);default:return Te(e)?Me.date(e,t):Re(e)?Me.big(e,t):0}}var Ve={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.ensure=void 0,Ue.ensure=function(e){if(null==e)throw new Error("Did not expect an argument to be undefined");return e};var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.extractStyles=Fe.mergeNativeStyles=void 0,Fe.mergeNativeStyles=function(e,t){const n=[e,...t.filter((e=>void 0!==e))];return Object.keys(e).reduce(((e,t)=>{const r=n.map((e=>e[t]));return Object.assign(Object.assign({},e),{[t]:(o=r,o.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{}))});var o}),{})},Fe.extractStyles=function(e,t){return e?Object.entries(e).reduce(((e,n)=>{let[r,o]=e,[i,a]=n;return t.includes(i)?r[i]=a:o[i]=a,[r,o]}),[{},{}]):[{},{}]};var ze={};Object.defineProperty(ze,"__esModule",{value:!0}),ze.parseInlineStyle=void 0,ze.parseInlineStyle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return e.split(";").reduce(((e,t)=>{const n=t.split(":");if(2===n.length){e[n[0].trim().replace(/(-.)/g,(e=>e[1].toUpperCase()))]=n[1].trim()}return e}),{})}catch(e){return{}}};var Je,$e,He,Ge={},We={};Object.defineProperty(We,"__esModule",{value:!0}),Je=Ge,$e=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),He=f&&f.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||$e(t,e,n)},Object.defineProperty(Je,"__esModule",{value:!0}),He(We,Je);var qe={},Ye={};function Qe(e,t,n,r,o){Xe(((e,t,n)=>n.splice(t,1)),e,n,r,o)}function Xe(e,t,n,r,o){t.forEach((t=>{var i;t.propertyGroups&&Xe(e,t.propertyGroups,n,r,o),null===(i=t.properties)||void 0===i||i.forEach(((t,i,a)=>{t.key===n&&(void 0===r||void 0===o?e(t,i,a):t.objects?Xe(e,t.objects[r].properties,o):t.properties&&Xe(e,t.properties[r],o))}))}))}Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.moveProperty=Ye.transformGroupsIntoTabs=Ye.changePropertyIn=Ye.hideNestedPropertiesIn=Ye.hidePropertiesIn=Ye.hidePropertyIn=void 0,Ye.hidePropertyIn=Qe,Ye.hidePropertiesIn=function(e,t,n){n.forEach((t=>Xe(((e,t,n)=>n.splice(t,1)),e,t,void 0,void 0)))},Ye.hideNestedPropertiesIn=function(e,t,n,r,o){o.forEach((t=>Qe(e,0,n,r,t)))},Ye.changePropertyIn=function(e,t,n,r,o,i){Xe(n,e,r,o,i)},Ye.transformGroupsIntoTabs=function(e){const t=[];e.forEach((e=>{e.propertyGroups&&(t.push(...e.propertyGroups),e.propertyGroups=[])})),e.push(...t)},Ye.moveProperty=function(e,t,n){e>=0&&t>=0&&e<n.length&&t<n.length&&e!==t&&n.splice(t,0,...n.splice(e,1))},function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ye,e)}(qe),function(e){var t=f&&f.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=f&&f.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ue,e),n(Fe,e),n(ze,e),n(Ge,e),n(qe,e)}(Ve);function Ze(e){return Array.from(new Set(e))}function Ke(e){return 0-e}function et(e){return e.length>1?e.sort(((e,t)=>e.valuePercentage-t.valuePercentage)).map((e=>[Math.abs(e.valuePercentage/100),e.colour])):[[0,"#17347B"],[.5,"#0595DB"],[1,"#76CA02"]]}function tt(e){return e&&e instanceof u?e.toNumber():e}const nt={font:{color:"#555",size:12},margin:{l:80,pad:0},legend:{font:{family:"Open Sans",size:14}},xaxis:{fixedrange:!0,ticks:""},yaxis:{fixedrange:!0,ticks:"",title:{standoff:5}}},rt={responsive:!0},ot={type:"heatmap",hoverinfo:"none",xgap:1,ygap:1,colorbar:{y:1,yanchor:"top",ypad:0,xpad:5,outlinecolor:"#9ba492"},connectgaps:!1};function it(n){var o,i;const c=(n=>{let{customSeriesOptions:r,horizontalAxisAttribute:o,horizontalSortAttribute:i,horizontalSortOrder:c,onClickAction:s,scaleColors:l,seriesDataSource:u,seriesValueAttribute:d,showScale:f,smoothColor:p,tooltipHoverText:h,verticalAxisAttribute:g,verticalSortAttribute:v,verticalSortOrder:m}=n;const[b,y]=e([]);t((()=>{if("available"===u.status&&u.items){const e=u.items.map((e=>{var t;return{value:null===(t=Ve.ensure(d).get(e).value)||void 0===t?void 0:t.toNumber(),hoverText:null==h?void 0:h.get(e).value,horizontalAxisValue:tt(null==o?void 0:o.get(e).value),horizontalSortValue:null==i?void 0:i.get(e).value,verticalAxisValue:tt(null==g?void 0:g.get(e).value),verticalSortValue:null==v?void 0:v.get(e).value}}));y(e)}}),[u,d,h,o,g,i,v]);const w=a((()=>s?()=>{var e;(e=s)&&e.canExecute&&!e.isExecuting&&e.execute()}:void 0),[s]);return a((()=>{const e=[...b];v&&e.sort(((e,t)=>{const n=Be(e.verticalSortValue,t.verticalSortValue);return"desc"===m?Ke(n):n}));const t=Ze(e.map((e=>{let{verticalAxisValue:t}=e;return t})));i&&e.sort(((e,t)=>{const n=Be(e.horizontalSortValue,t.horizontalSortValue);return"desc"===c?Ke(n):n}));const n=Ze(e.map((e=>{let{horizontalAxisValue:t}=e;return t}))),o=t.map((t=>n.map((n=>e.find((e=>{let{horizontalAxisValue:r,verticalAxisValue:o}=e;return r===n&&o===t})))))),a=o.map((e=>e.map((e=>{var t;return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:null})))),s=o.map((e=>e.map((e=>{var t;return null!==(t=null==e?void 0:e.hoverText)&&void 0!==t?t:""}))));return[{colorscale:et(l),customSeriesOptions:r,hoverinfo:h?"text":"none",hovertext:s,onClick:w,showscale:f,x:n.map((e=>{var t;return null!==(t=null==e?void 0:e.toLocaleString())&&void 0!==t?t:null})),y:t.map((e=>{var t;return null!==(t=null==e?void 0:e.toLocaleString())&&void 0!==t?t:null})),z:a,zsmooth:!!p&&"best",dataSourceItems:[]}]}),[r,b,i,c,w,l,f,p,h,v,m])})({customSeriesOptions:n.customSeriesOptions,horizontalAxisAttribute:n.horizontalAxisAttribute,horizontalSortAttribute:n.horizontalSortAttribute,horizontalSortOrder:n.horizontalSortOrder,onClickAction:n.onClickAction,scaleColors:n.scaleColors,seriesDataSource:n.seriesDataSource,seriesValueAttribute:n.seriesValueAttribute,showScale:n.showScale,smoothColor:n.smoothColor,tooltipHoverText:n.tooltipHoverText,verticalAxisAttribute:n.verticalAxisAttribute,verticalSortAttribute:n.verticalSortAttribute,verticalSortOrder:n.verticalSortOrder}),s=a((()=>({...nt,annotations:n.showValues?c[0].z.reduce(((e,t,r)=>[...e,...t.map(((e,t)=>{var o,i,a,s,l,u,d;return s=null!==(o=c[0].x[t])&&void 0!==o?o:void 0,l=null!==(i=c[0].y[r])&&void 0!==i?i:void 0,u=null!==(a=null==e?void 0:e.toLocaleString())&&void 0!==a?a:"",d=n.valuesColor,{xref:"x",yref:"y",x:s,y:l,text:u,font:{family:"Open Sans",size:14,color:d||"#555"},showarrow:!1}}))]),[]):[]})),[c,n.showValues,n.valuesColor]);return r(Pe,{type:"HeatMap",className:h("widget-heatmap-chart",n.class),data:c,width:n.width,widthUnit:n.widthUnit,height:n.height,heightUnit:n.heightUnit,showLegend:n.showScale,xAxisLabel:null===(o=n.xAxisLabel)||void 0===o?void 0:o.value,yAxisLabel:null===(i=n.yAxisLabel)||void 0===i?void 0:i.value,gridLinesMode:n.gridLines,showSidebarEditor:n.enableDeveloperMode,customLayout:n.customLayout,customConfig:n.customConfigurations,layoutOptions:s,configOptions:rt,seriesOptions:ot,enableThemeConfig:n.enableThemeConfig})}export{it as HeatMap};
